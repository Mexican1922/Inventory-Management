# Role-Based Access Control Implementation Plan

**Goal:** Implement tiered security for Admin, Manager, and Viewer roles.

---

### Task 1: Create RBAC Utilities

**Files:**

- Create: `src/components/auth/RoleGate.tsx`
- Create: `src/components/auth/RoleProtectedRoute.tsx`

**Step 1: RoleGate**

- A component that takes `minRole` and `children`.
- Renders children only if `currentRole` >= `minRole`.

**Step 2: RoleProtectedRoute**

- A route wrapper that checks permissions before rendering a page component.

---

### Task 2: Secure UI Actions

**Files:**

- Modify: `src/pages/Inventory.tsx`
- Modify: `src/pages/Orders.tsx`
- Modify: `src/pages/Suppliers.tsx`

**Step 1: Wrap "Add" and "Edit/Adjust" buttons**

- Wrap them in `<RoleGate minRole="Manager">`.

---

### Task 3: Filter Sidebar Navigation

**Files:**

- Modify: `src/components/layout/Sidebar.tsx`

**Step 1: Check required roles in navItems**

- Add a `minRole` property to `navItems`.
- Use `useAuth` to filter items before rendering.

---

### Task 4: Secure Routes in App.tsx

**Files:**

- Modify: `src/App.tsx`

**Step 1: Wrap sensitive routes**

- For example, `/audit-log` should be wrapped in `<RoleProtectedRoute requiredRole="Admin">`.

---

### Task 5: Database Enforcement (Manual Step)

**Step 1: Document Firestore Rules**

- Create a `FIREBASE_RULES.txt` (or similar) with the production rules for the user to apply.
